{
  "components": [

    {
      "name": "Component",
      "supertypes": [ ],
      "abstract": true,
      "defaults": [ "Component!", "-Component!" ],
    },

    { "name": "This" }, // special
    { "name": "Die" }, //  0..0
    { "name": "Ephemeral", "abstract": true },

    // 0..1 (insufficient)
    { "name": "Phase", "abstract": true },
    { "name": "ProductionPhase", "supertypes": ["Phase"] },
    { "name": "End",             "supertypes": ["Phase"] },

    // 1..1
    { "name": "Anyone", "abstract": true },
    { "name": "Npc", "supertypes": ["Anyone"] },
    {
      "name": "Player",
      "supertypes": [ "Anyone" ],
//    "effects": [ "ProductionPhase: -5" ], // terrible wart
      "abstract": true,
    },
    { "name": "Me",      "supertypes": ["Player"] }, // The placeholder for the context owner
    { "name": "Player1", "supertypes": ["Player"] }, // The actual solo player

    { "name": "Generation" },
    { "name": "Generational", "effects": ["Generation: -This"], "abstract": true },

    // 1..1
    {
      "name": "Area",
//    "effects": ["Occupant<This> IF 2 Occupant<This>: Die"], // TODO conditionals
      "abstract": true,
    },
    { "name": "RemoteArea",   "supertypes": ["Area"],      "abstract": true },
    { "name": "MarsArea",     "supertypes": ["Area"],      "abstract": true },
    { "name": "LandArea",     "supertypes": ["MarsArea"],  "abstract": true },
    { "name": "VolcanicArea", "supertypes": ["LandArea"],  "abstract": true },
    { "name": "WaterArea",    "supertypes": ["MarsArea"],  "abstract": true },
    { "name": "NoctisArea",   "supertypes": ["MarsArea"],  "abstract": true },

    // 0..1 (insufficient)
    {
      "name": "Occupant",
      "dependencies": [ "Area" ],
      "abstract": true,
    },

    // 0..1 (insufficient)
    {
      "name": "Tile",
      "supertypes": [ "Occupant" ],
      // "immediate": [ "$createAdjacencies(This)" ],
      "abstract": true,
    },

    // 0..1 all of these
    { "name": "AreaAdjacency", "dependencies": [ "MarsArea", "MarsArea" ] },
    {
      "name": "Neighbor",
      "dependencies": ["MarsArea", "Tile"],
//    "effects": [ "This: (Tile: 0)" ], // requires that Tile exist
    },
    {
      "name": "Adjacency",
      "dependencies": [ "Tile", "Tile" ],
      "effects": [
        "-Tile(HAS This): -This",
        // TODO: how to make sure both tiles exist??
      ]
    },

    {
      "name": "Owned",
      "dependencies": [ "Anyone" ],
      "abstract": true,
      "defaults": [ "*Owned<Me>" ],
    },


    // Owned things -- come back to global parameters later


    {
      "name": "Resource",
      "supertypes": [ "Owned" ],
      "abstract": true,
    },
    { "name": "StandardResource", "supertypes": ["Resource"], "abstract": true },
    { "name": "Megacredit", "supertypes": ["StandardResource"] },
    { "name": "Steel",      "supertypes": ["StandardResource"] },
    { "name": "Titanium",   "supertypes": ["StandardResource"] },
    { "name": "Plant",      "supertypes": ["StandardResource"] },
    { "name": "Heat",       "supertypes": ["StandardResource"] },
    {
      "name": "Energy",
      "supertypes": [ "StandardResource" ],
      "effects": [ "ProductionPhase:: -This, Heat" ], // Heat FROM This
    },
    {
      "name": "Production",
      "supertypes": [ "Owned" ],
      "dependencies": [ "StandardResource" ], // 2: production to resource type - TYPE
      "effects": [ "ProductionPhase: StandardResource" ],
    },

    { "name": "VictoryPoint", "supertypes": [ "Owned<Player>" ] },

    // 0..1
    { "name": "HasRaisedTR", "supertypes": ["Generational"] },

    {
      "name": "TerraformRating",
      "supertypes": [ "Owned<Player>" ],
      "effects": [
        "This:: HasRaisedTR.", // boo!
        "ProductionPhase: 1",
        "End: VictoryPoint",
      ]
    },

    {
      "name": "CardBack",
      "supertypes": [ "Owned<Player>" ],
      "abstract": true,
    },
    { "name": "ProjectCard",     "supertypes": ["CardBack"] },
    { "name": "PreludeCard",     "supertypes": ["CardBack"] },
    { "name": "CorporationCard", "supertypes": ["CardBack"] },


    // Back to unowned things

    // TODO: atomized?
    {
      "name": "GlobalParameter",
      "effects": [  "This: TerraformRating" ],
      "defaults": [ "GlobalParameter.", "-GlobalParameter." ],
      "abstract": true
    },
    {
      "name": "OceanTile",
      "supertypes": [ "Tile<MarsArea>", "GlobalParameter" ],
      "effects": [ "Adjacency<This, Tile>: 2" ],
      "defaults": [ "OceanTile<WaterArea>" ],
    },
    {
      "name": "TemperatureStep",
      "supertypes": [ "GlobalParameter" ],
      "effects": [
        // "This IF =3 This: PROD[Heat]", //player?
        // "This IF =5 This: PROD[Heat]",
        // "This IF =15 This: OceanTile",
      ]
    },
    {
      "name": "OxygenStep",
      "supertypes": [ "GlobalParameter" ],
      "effects": [
        // "This IF =8 This: TemperatureStep",
      ]
    },
    {
      "name": "VenusStep",
      "supertypes": [ "GlobalParameter" ],
      "effects": [
        // "This IF =4 This: ProjectCard", // player?
        // "This IF =8 This: TerraformRating", // player?
      ]
    },

    // Back to owned things

//    {
//      "name": "OwnedOccupant",
//      "supertypes": [ "Owned", "Occupant" ],
//      "abstract": true,
//    },
    {
      "name": "OwnedTile",
      "supertypes": [ "Tile" ],
      "abstract": true,
    },
    {
      "name": "GreeneryTile",
      "supertypes": [ "OwnedTile<MarsArea>" ],
      "effects": [
        "This: OxygenStep",
        "End: VictoryPoint",
      ],
      "defaults": [ "GreeneryTile<LandArea(HAS Neighbor<OwnedTile>)>" ],
    },
    {
      "name": "CityTile",
      "supertypes": [ "OwnedTile" ],
      "effects": [
        "End: VictoryPoint / Adjacency<This, GreeneryTile<Anyone>>", // TODO ><
      ],
      "defaults": [ "CityTile<LandArea(HAS MAX 0 Neighbor<CityTile<Anyone>>)>" ],
    },
    {
      "name": "SpecialTile",
      "supertypes": [ "OwnedTile<MarsArea>" ],
      "defaults": [ "SpecialTile<LandArea>" ],
    },

//    { "name": "Community", "supertypes": ["OwnedOccupant"]},
    {
      "name": "PlayedEvent",
      "supertypes": [ "Owned<Player>" ],
    },

    { "name": "CardFront",     "supertypes": [ "Owned" ],     "abstract": true },
    { "name": "ActiveCard",    "supertypes": [ "CardFront" ], "abstract": true },
    { "name": "AutomatedCard", "supertypes": [ "CardFront" ], "abstract": true },
    {
      "name": "EventCard",
      "supertypes": [ "CardFront" ],
      "effects": ["This: PlayedEvent, -This"], // TODO: FROM
      "abstract": true
    },

    {
      "name": "Cardbound",
      "supertypes": [ "Owned" ],
      "dependencies": [ "CardFront" ],
      "effects": [
        "This:: CardFront: 0",
        "-CardFront: -This",
      ],
      "abstract": true,
    },

    { "name": "Tag", "supertypes": [ "Cardbound" ], "abstract": true },
    { "name": "BuildingTag",  "supertypes": ["Tag"] },
    { "name": "SpaceTag",     "supertypes": ["Tag"] },
    { "name": "CityTag",      "supertypes": ["Tag"] },
    { "name": "PowerTag",     "supertypes": ["Tag"] },
    { "name": "ScienceTag",   "supertypes": ["Tag"] },

    { "name": "BioTag",       "supertypes": ["Tag"], "abstract": true },
    { "name": "PlantTag",     "supertypes": ["BioTag"] },
    { "name": "MicrobeTag",   "supertypes": ["BioTag"] },
    { "name": "AnimalTag",    "supertypes": ["BioTag"] },

    { "name": "PlanetaryTag", "supertypes": ["Tag"], "abstract": true },
    { "name": "EarthTag",     "supertypes": ["PlanetaryTag"] },
    { "name": "JovianTag",    "supertypes": ["PlanetaryTag"] },
    { "name": "VenusTag",     "supertypes": ["PlanetaryTag"] },

    {
      "name": "CardResource",
      "abstract": true,
      "supertypes": [ "Resource", "Cardbound" ],
      "defaults": [ "CardResource." ],
    },
    { "name": "Animal",   "supertypes": ["CardResource"] },
    { "name": "Asteroid", "supertypes": ["CardResource"] },
    { "name": "Floater",  "supertypes": ["CardResource"] },
    { "name": "Microbe",  "supertypes": ["CardResource"] },
    { "name": "Science",  "supertypes": ["CardResource"] },
    { "name": "Fighter",  "supertypes": ["CardResource"] },

    { "name": "UseAction", "supertypes": ["Ephemeral"], "abstract": true },
    { "name": "UseAction1", "supertypes": ["UseAction"] },
    { "name": "UseAction2", "supertypes": ["UseAction"] },
    { "name": "UseAction3", "supertypes": ["UseAction"] },

    // 0..1
    { "name": "CardUsed", "supertypes": ["Cardbound"] },

    { "name": "PayWall", "supertypes": ["Owned"], "abstract": true },
    { "name": "Required", "supertypes": ["PayWall"], "dependencies": ["GlobalParameter"] },
    {
      "name": "Owed",
      "supertypes": [ "PayWall" ],
      "dependencies": [ "Resource" ],
      "defaults": [ "-Owed." ],
      "effects": [
//        "This:: Accept<Resource>."
      ],
    },
    {
      "name": "Purchase",
      "supertypes": [ "Owned" ],
      "dependencies": [ "Component" ],
      "effects": [
//        "This: (MAX 0 PayWall: Component)" // TODO
      ],
    },
//    {
//      "name": "PlayCard",
//      "supertypes": [ "Purchase<CardFront>" ],
//      "effects": [
//        "This:: $handleRequirement(CardFront), Owed<Megacredit> / $costOf(CardFront)",
//        "This: MAX 0 PayWall: (CardFront, -ProjectCard)", // TODO
//      ],
//    },

    {
      "name": "Accept",
      "dependencies": ["Resource"],
      "effects": [
//        "-> X Pay<Resource> FROM Resource",
//        "-Owed IF MAX 0 Owed:: -This"
      ],
    },


    {
      "name": "Global", // TODO
      "effects": [
        "Purchase<BuildingTag>: Accept<Steel>",
        "Purchase<SpaceTag>: Accept<Titanium>",
      ],
    },

    { "name": "StandardAction",  "abstract": true },
    { "name": "StandardProject", "abstract": true },
    { "name": "PowerPlant", "supertypes": ["StandardProject"] },

    {
      "name": "NextCardEffect",
      "supertypes": ["Owned"],
      "effects": ["Purchase<CardFront>: -This"],
      "abstract": true,
    },

    {
      "name": "Card195Effect",
      "supertypes": ["NextCardEffect"],
      "effects": ["Purchase<CardFront>: -8 Owed"],
    },
    {
      "name": "Card206Effect",
      "supertypes": ["NextCardEffect"],
      "effects": ["Purchase<CardFront>:: -2 Required<GlobalParameter>"],
    },

    { "name": "Card021Area", "supertypes": ["RemoteArea"] },
    { "name": "Card081Area", "supertypes": ["RemoteArea"] },
    { "name": "Card220Area", "supertypes": ["RemoteArea"] },
    { "name": "Card236Area", "supertypes": ["RemoteArea"] },
    { "name": "Card238Area", "supertypes": ["RemoteArea"] },
    { "name": "Card248Area", "supertypes": ["RemoteArea"] },
    { "name": "CardX12Area", "supertypes": ["RemoteArea"] },

    { "name": "Card008Tile", "supertypes": ["CityTile"] },
    { "name": "Card085Tile", "supertypes": ["SpecialTile"] },
  ]
}
